<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
	<title>Coverage - include/GLib/Win/FileSystem.h</title>
	<link rel="stylesheet" type="text/css" href="../../../coverage.css" />
</head>
<body>
	<div style="padding-right:4px;">
		<p class="title">GLib - coverage report</p>
		<hr />

		<table class="info">
			<tr>
				<td style="width:15%" class="headerItem">Current view:</td>
				<td style="width:35%" class="headerValue">
					<a href="../../../index.html">TopLevel</a> - <a href="index.html">include/GLib/Win</a> - <span>FileSystem.h</span>
					<span>(source / <a href="FileSystem.h.functions.html">functions</a>)</span>
				</td>
				<td style="width:20%"></td>
				<td style="width:10%" class="headerItem">Hit</td>
				<td style="width:10%" class="headerItem">Total</td>
				<td style="width:10%" class="headerItem">Coverage</td>
			</tr>
			<tr>
				<td class="headerItem">Test:</td>
				<td class="headerValue">D:\a\GLibCopy\GLibCopy\out\x64\Debug\Tests.exe</td>
				<td class="headerItem">Lines:</td>
				<td class="coverageValue">81</td>
				<td class="coverageValue">90</td>
				<td class="green coverageValue">90&nbsp;%</td>
			</tr>
			<tr>
				<td class="headerItem">Time:</td>
				<td class="headerValue">17 Aug 2020, 08:59:45 (+0000)</td>
				<td class="headerItem">Functions:</td>
				<td class="coverageValue">9</td>
				<td class="coverageValue">9</td>
				<td class="green coverageValue">100&nbsp;%</td>
			</tr>
		</table>
		<hr />

		<table class="source">
			<tr class="">
				<td>
					<pre><code><span class="line">[  1]</span><span><span class="d">#pragma·once</span></span></code></pre>
				</td>
			</tr>
			<tr class="">
				<td>
					<pre><code><span class="line">[  2]</span><span></span></code></pre>
				</td>
			</tr>
			<tr class="">
				<td>
					<pre><code><span class="line">[  3]</span><span><span class="d">#include·&lt;GLib</span><span class="d">/Win</span><span class="d">/ErrorCheck.h&gt;</span></span></code></pre>
				</td>
			</tr>
			<tr class="">
				<td>
					<pre><code><span class="line">[  4]</span><span><span class="d">#include·&lt;GLib</span><span class="d">/Win</span><span class="d">/Handle.h&gt;</span></span></code></pre>
				</td>
			</tr>
			<tr class="">
				<td>
					<pre><code><span class="line">[  5]</span><span></span></code></pre>
				</td>
			</tr>
			<tr class="">
				<td>
					<pre><code><span class="line">[  6]</span><span><span class="d">#include·&lt;GLib</span><span class="d">/IcuUtils.h&gt;</span></span></code></pre>
				</td>
			</tr>
			<tr class="">
				<td>
					<pre><code><span class="line">[  7]</span><span><span class="d">#include·&lt;GLib</span><span class="d">/stackorheap.h&gt;</span></span></code></pre>
				</td>
			</tr>
			<tr class="">
				<td>
					<pre><code><span class="line">[  8]</span><span></span></code></pre>
				</td>
			</tr>
			<tr class="">
				<td>
					<pre><code><span class="line">[  9]</span><span><span class="d">#include·&lt;map&gt;</span></span></code></pre>
				</td>
			</tr>
			<tr class="">
				<td>
					<pre><code><span class="line">[ 10]</span><span><span class="d">#include·&lt;vector&gt;</span></span></code></pre>
				</td>
			</tr>
			<tr class="">
				<td>
					<pre><code><span class="line">[ 11]</span><span></span></code></pre>
				</td>
			</tr>
			<tr class="">
				<td>
					<pre><code><span class="line">[ 12]</span><span><span class="k">namespace</span><span class="w">·</span>GLib::Win::FileSystem</span></code></pre>
				</td>
			</tr>
			<tr class="">
				<td>
					<pre><code><span class="line">[ 13]</span><span>{</span></code></pre>
				</td>
			</tr>
			<tr class="">
				<td>
					<pre><code><span class="line">[ 14]</span><span><span class="w"> → </span><span class="c">//·try·again·to·use·fs:path·as·return·values?</span></span></code></pre>
				</td>
			</tr>
			<tr class="">
				<td>
					<pre><code><span class="line">[ 15]</span><span><span class="w"> → </span><span class="k">namespace</span><span class="w">·</span>Detail</span></code></pre>
				</td>
			</tr>
			<tr class="">
				<td>
					<pre><code><span class="line">[ 16]</span><span><span class="w"> → </span>{</span></code></pre>
				</td>
			</tr>
			<tr class="">
				<td>
					<pre><code><span class="line">[ 17]</span><span><span class="w"> →  → </span><span class="k">constexpr</span><span class="w">·</span><span class="k">auto</span><span class="w">·</span>MaximumPathLength<span class="w">·</span>=<span class="w">·</span>32768U;</span></code></pre>
				</td>
			</tr>
			<tr class="">
				<td>
					<pre><code><span class="line">[ 18]</span><span><span class="w"> → </span>}</span></code></pre>
				</td>
			</tr>
			<tr class="">
				<td>
					<pre><code><span class="line">[ 19]</span><span></span></code></pre>
				</td>
			</tr>
			<tr class="">
				<td>
					<pre><code><span class="line">[ 20]</span><span><span class="w"> → </span><span class="c">//·return·an·iterator?</span></span></code></pre>
				</td>
			</tr>
			<tr class="">
				<td>
					<pre><code><a id="21"><span class="line">[ 21]</span></a><span><span class="w"> → </span><span class="k">inline</span><span class="w">·</span>std::<span class="t">vector</span>&lt;std::<span class="t">string</span>&gt;<span class="w">·</span>LogicalDrives()</span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[ 22]</span><span><span class="w"> → </span>{</span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[ 23]</span><span><span class="w"> →  → </span>std::<span class="t">vector</span>&lt;std::<span class="t">string</span>&gt;<span class="w">·</span>drives;</span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[ 24]</span><span><span class="w"> →  → </span>GLib::Util::WideCharBuffer<span class="w">·</span>s;</span></code></pre>
				</td>
			</tr>
			<tr class="">
				<td>
					<pre><code><span class="line">[ 25]</span><span></span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[ 26]</span><span><span class="w"> →  → </span>DWORD<span class="w">·</span>sizeWithFinalTerminator<span class="w">·</span>=<span class="w">·</span>::GetLogicalDriveStringsW(0,<span class="w">·</span><span class="k">nullptr</span>);</span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[ 27]</span><span><span class="w"> →  → </span>s.EnsureSize(<span class="k">static_cast</span>&lt;<span class="t">size_t</span>&gt;(sizeWithFinalTerminator-1));</span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[ 28]</span><span><span class="w"> →  → </span><span class="k">auto</span><span class="w">·</span>size<span class="w">·</span>=<span class="w">·</span>::GetLogicalDriveStringsW(<span class="k">static_cast</span>&lt;DWORD&gt;(s.size()),<span class="w">·</span>s.Get());</span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[ 29]</span><span><span class="w"> →  → </span>Util::AssertTrue(size<span class="w">·</span>!=<span class="w">·</span>0<span class="w">·</span>&amp;&amp;<span class="w">·</span>size<span class="w">·</span>&lt;<span class="w">·</span>sizeWithFinalTerminator,<span class="w">·</span><span class="s">&quot;GetLogicalDriveStringsW&quot;</span>);</span></code></pre>
				</td>
			</tr>
			<tr class="">
				<td>
					<pre><code><span class="line">[ 30]</span><span></span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[ 31]</span><span><span class="w"> →  → </span>std::wstring_view<span class="w">·</span>pp<span class="w">·</span>{<span class="w">·</span>s.Get(),<span class="w">·</span>size};</span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[ 32]</span><span><span class="w"> →  → </span><span class="k">const</span><span class="w">·</span><span class="k">wchar_t</span><span class="w">·</span>nul<span class="w">·</span>=<span class="w">·</span>u<span class="s">&apos;\0&apos;</span>;</span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[ 33]</span><span><span class="w"> →  → </span><span class="k">for</span><span class="w">·</span>(<span class="t">size_t</span><span class="w">·</span>pos<span class="w">·</span>=<span class="w">·</span>0,<span class="w">·</span>next<span class="w">·</span>=<span class="w">·</span>pp.find(nul,<span class="w">·</span>pos);<span class="w">·</span>next<span class="w">·</span>!=<span class="w">·</span>std::wstring_view::npos;<span class="w">·</span>pos<span class="w">·</span>=<span class="w">·</span>next+1,<span class="w">·</span>next<span class="w">·</span>=<span class="w">·</span>pp.find(nul,<span class="w">·</span>pos))</span></code></pre>
				</td>
			</tr>
			<tr class="">
				<td>
					<pre><code><span class="line">[ 34]</span><span><span class="w"> →  → </span>{</span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[ 35]</span><span><span class="w"> →  →  → </span>drives.push_back(Cvt::w2a(pp.substr(pos,<span class="w">·</span>next-1-pos)));</span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[ 36]</span><span><span class="w"> →  → </span>}</span></code></pre>
				</td>
			</tr>
			<tr class="">
				<td>
					<pre><code><span class="line">[ 37]</span><span></span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><a id="38"><span class="line">[ 38]</span></a><span><span class="w"> →  → </span><span class="k">return</span><span class="w">·</span>drives;</span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[ 39]</span><span><span class="w"> → </span>}</span></code></pre>
				</td>
			</tr>
			<tr class="">
				<td>
					<pre><code><span class="line">[ 40]</span><span></span></code></pre>
				</td>
			</tr>
			<tr class="">
				<td>
					<pre><code><span class="line">[ 41]</span><span><span class="w"> → </span><span class="c">//·return·an·iterator?</span></span></code></pre>
				</td>
			</tr>
			<tr class="">
				<td>
					<pre><code><a id="42"><span class="line">[ 42]</span></a><span><span class="w"> → </span><span class="k">inline</span><span class="w">·</span>std::<span class="t">map</span>&lt;std::<span class="t">string</span>,<span class="w">·</span>std::<span class="t">string</span>&gt;<span class="w">·</span>DriveMap()</span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[ 43]</span><span><span class="w"> → </span>{</span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[ 44]</span><span><span class="w"> →  → </span>std::<span class="t">map</span>&lt;std::<span class="t">string</span>,<span class="w">·</span>std::<span class="t">string</span>&gt;<span class="w">·</span>result;</span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[ 45]</span><span><span class="w"> →  → </span>GLib::Util::WideCharBuffer<span class="w">·</span>s;</span></code></pre>
				</td>
			</tr>
			<tr class="">
				<td>
					<pre><code><span class="line">[ 46]</span><span></span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[ 47]</span><span><span class="w"> →  → </span><span class="k">for</span><span class="w">·</span>(<span class="k">const</span><span class="w">·</span><span class="k">auto</span><span class="w">·</span>&amp;<span class="w">·</span>logicalDrive<span class="w">·</span>:<span class="w">·</span>LogicalDrives())</span></code></pre>
				</td>
			</tr>
			<tr class="">
				<td>
					<pre><code><span class="line">[ 48]</span><span><span class="w"> →  → </span>{</span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[ 49]</span><span><span class="w"> →  →  → </span>DWORD<span class="w">·</span>length<span class="w">·</span>=<span class="w">·</span>::QueryDosDeviceW(Cvt::a2w(logicalDrive).c_str(),<span class="w">·</span>s.Get(),<span class="w">·</span><span class="k">static_cast</span>&lt;DWORD&gt;(s.size()));</span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[ 50]</span><span><span class="w"> →  →  → </span>Util::AssertTrue(length<span class="w">·</span>!=<span class="w">·</span>0,<span class="w">·</span><span class="s">&quot;QueryDosDeviceW&quot;</span>);</span></code></pre>
				</td>
			</tr>
			<tr class="">
				<td>
					<pre><code><span class="line">[ 51]</span><span></span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[ 52]</span><span><span class="w"> →  →  → </span>s.EnsureSize(length);</span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[ 53]</span><span><span class="w"> →  →  → </span><span class="t">size_t</span><span class="w">·</span>sizeWithoutTwoTrailingNulls<span class="w">·</span>=<span class="w">·</span>length<span class="w">·</span>-<span class="w">·</span>2;</span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[ 54]</span><span><span class="w"> →  →  → </span>std::<span class="t">string</span><span class="w">·</span>dosDeviceName<span class="w">·</span>=<span class="w">·</span>Cvt::w2a({s.Get(),<span class="w">·</span>sizeWithoutTwoTrailingNulls});</span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[ 55]</span><span><span class="w"> →  →  → </span>result.emplace(logicalDrive,<span class="w">·</span>dosDeviceName);</span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[ 56]</span><span><span class="w"> →  → </span>}</span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[ 57]</span><span><span class="w"> →  → </span><span class="k">return</span><span class="w">·</span>result;</span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[ 58]</span><span><span class="w"> → </span>}</span></code></pre>
				</td>
			</tr>
			<tr class="">
				<td>
					<pre><code><span class="line">[ 59]</span><span></span></code></pre>
				</td>
			</tr>
			<tr class="">
				<td>
					<pre><code><a id="60"><span class="line">[ 60]</span></a><span><span class="w"> → </span><span class="k">inline</span><span class="w">·</span>std::<span class="t">string</span><span class="w">·</span>PathOfFileHandle(HANDLE<span class="w">·</span>fileHandle,<span class="w">·</span>DWORD<span class="w">·</span>flags)</span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[ 61]</span><span><span class="w"> → </span>{</span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[ 62]</span><span><span class="w"> →  → </span>GLib::Util::WideCharBuffer<span class="w">·</span>s;</span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[ 63]</span><span><span class="w"> →  → </span>DWORD<span class="w">·</span>length<span class="w">·</span>=<span class="w">·</span>::GetFinalPathNameByHandleW(fileHandle,<span class="w">·</span><span class="k">nullptr</span>,<span class="w">·</span>0,<span class="w">·</span>flags);</span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[ 64]</span><span><span class="w"> →  → </span>Util::AssertTrue(length<span class="w">·</span>!=<span class="w">·</span>0,<span class="w">·</span><span class="s">&quot;GetFinalPathNameByHandleW&quot;</span>);</span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[ 65]</span><span><span class="w"> →  → </span>s.EnsureSize(length);</span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[ 66]</span><span><span class="w"> →  → </span>length<span class="w">·</span>=<span class="w">·</span>::GetFinalPathNameByHandleW(fileHandle,<span class="w">·</span>s.Get(),<span class="w">·</span><span class="k">static_cast</span>&lt;DWORD&gt;(s.size()),<span class="w">·</span>flags);</span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[ 67]</span><span><span class="w"> →  → </span>Util::AssertTrue(length<span class="w">·</span>!=<span class="w">·</span>0<span class="w">·</span>&amp;&amp;<span class="w">·</span>length<span class="w">·</span>&lt;<span class="w">·</span>s.size(),<span class="w">·</span><span class="s">&quot;GetFinalPathNameByHandleW&quot;</span>);</span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[ 68]</span><span><span class="w"> →  → </span><span class="k">return</span><span class="w">·</span>Cvt::w2a(std::wstring_view{s.Get(),<span class="w">·</span>length});</span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[ 69]</span><span><span class="w"> → </span>}</span></code></pre>
				</td>
			</tr>
			<tr class="">
				<td>
					<pre><code><span class="line">[ 70]</span><span></span></code></pre>
				</td>
			</tr>
			<tr class="">
				<td>
					<pre><code><a id="71"><span class="line">[ 71]</span></a><span><span class="w"> → </span><span class="k">inline</span><span class="w">·</span>std::<span class="t">string</span><span class="w">·</span>NormalisePath(<span class="k">const</span><span class="w">·</span>std::<span class="t">string</span><span class="w">·</span>&amp;<span class="w">·</span>path,<span class="w">·</span><span class="k">const</span><span class="w">·</span>std::<span class="t">map</span>&lt;std::<span class="t">string</span>,<span class="w">·</span>std::<span class="t">string</span>&gt;<span class="w">·</span>&amp;<span class="w">·</span>driveMap)</span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[ 72]</span><span><span class="w"> → </span>{</span></code></pre>
				</td>
			</tr>
			<tr class="">
				<td>
					<pre><code><span class="line">[ 73]</span><span><span class="w"> →  → </span><span class="c">//·todo:·network·drives</span></span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[ 74]</span><span><span class="w"> →  → </span><span class="k">for</span><span class="w">·</span>(<span class="k">const</span><span class="w">·</span><span class="k">auto</span><span class="w">·</span>&amp;<span class="w">·</span>[deviceName,<span class="w">·</span>logicalName]<span class="w">·</span>:<span class="w">·</span>driveMap)</span></code></pre>
				</td>
			</tr>
			<tr class="">
				<td>
					<pre><code><span class="line">[ 75]</span><span><span class="w"> →  → </span>{</span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[ 76]</span><span><span class="w"> →  →  → </span><span class="t">size_t</span><span class="w">·</span>compareSize<span class="w">·</span>=<span class="w">·</span>logicalName.size();</span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[ 77]</span><span><span class="w"> →  →  → </span><span class="k">if</span><span class="w">·</span>(IcuUtils::CompareNoCase(path.c_str(),<span class="w">·</span>compareSize,<span class="w">·</span>logicalName.c_str(),<span class="w">·</span>compareSize)<span class="w">·</span>==<span class="w">·</span>IcuUtils::CompareResult::Equal)</span></code></pre>
				</td>
			</tr>
			<tr class="">
				<td>
					<pre><code><span class="line">[ 78]</span><span><span class="w"> →  →  → </span>{</span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[ 79]</span><span><span class="w"> →  →  →  → </span><span class="k">return</span><span class="w">·</span>deviceName<span class="w">·</span>+<span class="w">·</span>path.substr(compareSize);</span></code></pre>
				</td>
			</tr>
			<tr class="">
				<td>
					<pre><code><span class="line">[ 80]</span><span><span class="w"> →  →  → </span>}</span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[ 81]</span><span><span class="w"> →  → </span>}</span></code></pre>
				</td>
			</tr>
			<tr class="ncov">
				<td>
					<pre><code><span class="line">[ 82]</span><span><span class="w"> →  → </span><span class="k">throw</span><span class="w">·</span>std::runtime_error(<span class="s">&quot;Drive·not·mapped&quot;</span>);<span class="w">·</span><span class="c">//·or·just·return·path?</span></span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[ 83]</span><span><span class="w"> → </span>}</span></code></pre>
				</td>
			</tr>
			<tr class="">
				<td>
					<pre><code><span class="line">[ 84]</span><span></span></code></pre>
				</td>
			</tr>
			<tr class="">
				<td>
					<pre><code><a id="85"><span class="line">[ 85]</span></a><span><span class="w"> → </span><span class="k">inline</span><span class="w">·</span>std::<span class="t">string</span><span class="w">·</span>PathOfModule(HMODULE<span class="w">·</span>module)</span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[ 86]</span><span><span class="w"> → </span>{</span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[ 87]</span><span><span class="w"> →  → </span>GLib::Util::WideCharBuffer<span class="w">·</span>s;</span></code></pre>
				</td>
			</tr>
			<tr class="">
				<td>
					<pre><code><span class="line">[ 88]</span><span></span></code></pre>
				</td>
			</tr>
			<tr class="">
				<td>
					<pre><code><span class="line">[ 89]</span><span><span class="w"> →  → </span><span class="k">unsigned</span><span class="w">·</span><span class="k">int</span><span class="w">·</span>length;</span></code></pre>
				</td>
			</tr>
			<tr class="">
				<td>
					<pre><code><span class="line">[ 90]</span><span><span class="w"> →  → </span><span class="k">for</span><span class="w">·</span>(;;)</span></code></pre>
				</td>
			</tr>
			<tr class="">
				<td>
					<pre><code><span class="line">[ 91]</span><span><span class="w"> →  → </span>{</span></code></pre>
				</td>
			</tr>
			<tr class="">
				<td>
					<pre><code><span class="line">[ 92]</span><span><span class="w"> →  →  → </span><span class="c">//·this·could·return·prefix·&quot;\\?\&quot;</span></span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[ 93]</span><span><span class="w"> →  →  → </span><span class="k">unsigned</span><span class="w">·</span><span class="k">int</span><span class="w">·</span>len<span class="w">·</span>=<span class="w">·</span>::GetModuleFileNameW(module,<span class="w">·</span>s.Get(),<span class="w">·</span><span class="k">static_cast</span>&lt;<span class="k">unsigned</span><span class="w">·</span><span class="k">int</span>&gt;(s.size()));</span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[ 94]</span><span><span class="w"> →  →  → </span>Util::AssertTrue(len<span class="w">·</span>!=<span class="w">·</span>0,<span class="w">·</span><span class="s">&quot;GetModuleFileNameW&quot;</span>);</span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[ 95]</span><span><span class="w"> →  →  → </span><span class="k">if</span><span class="w">·</span>(len<span class="w">·</span>&lt;<span class="w">·</span>s.size())</span></code></pre>
				</td>
			</tr>
			<tr class="">
				<td>
					<pre><code><span class="line">[ 96]</span><span><span class="w"> →  →  → </span>{</span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[ 97]</span><span><span class="w"> →  →  →  → </span>length<span class="w">·</span>=<span class="w">·</span>len<span class="w">·</span>+<span class="w">·</span>1;</span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[ 98]</span><span><span class="w"> →  →  →  → </span><span class="k">break</span>;</span></code></pre>
				</td>
			</tr>
			<tr class="">
				<td>
					<pre><code><span class="line">[ 99]</span><span><span class="w"> →  →  → </span>}</span></code></pre>
				</td>
			</tr>
			<tr class="ncov">
				<td>
					<pre><code><span class="line">[100]</span><span><span class="w"> →  →  → </span><span class="k">if</span><span class="w">·</span>(s.size()<span class="w">·</span>&gt;=<span class="w">·</span>Detail::MaximumPathLength)</span></code></pre>
				</td>
			</tr>
			<tr class="">
				<td>
					<pre><code><span class="line">[101]</span><span><span class="w"> →  →  → </span>{</span></code></pre>
				</td>
			</tr>
			<tr class="ncov">
				<td>
					<pre><code><span class="line">[102]</span><span><span class="w"> →  →  →  → </span><span class="k">throw</span><span class="w">·</span>std::runtime_error(<span class="s">&quot;Path·too·long&quot;</span>);</span></code></pre>
				</td>
			</tr>
			<tr class="">
				<td>
					<pre><code><span class="line">[103]</span><span><span class="w"> →  →  → </span>}</span></code></pre>
				</td>
			</tr>
			<tr class="ncov">
				<td>
					<pre><code><span class="line">[104]</span><span><span class="w"> →  →  → </span>s.EnsureSize(s.size()<span class="w">·</span>*<span class="w">·</span>2);</span></code></pre>
				</td>
			</tr>
			<tr class="ncov">
				<td>
					<pre><code><span class="line">[105]</span><span><span class="w"> →  → </span>}</span></code></pre>
				</td>
			</tr>
			<tr class="">
				<td>
					<pre><code><span class="line">[106]</span><span></span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[107]</span><span><span class="w"> →  → </span>s.EnsureSize(length);</span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[108]</span><span><span class="w"> →  → </span>length<span class="w">·</span>=<span class="w">·</span>::GetModuleFileNameW(module,<span class="w">·</span>s.Get(),<span class="w">·</span><span class="k">static_cast</span>&lt;<span class="k">unsigned</span><span class="w">·</span><span class="k">int</span>&gt;(s.size()));</span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[109]</span><span><span class="w"> →  → </span>Util::AssertTrue(length<span class="w">·</span>!=<span class="w">·</span>0<span class="w">·</span>&amp;&amp;<span class="w">·</span>length<span class="w">·</span>&lt;<span class="w">·</span>s.size(),<span class="w">·</span><span class="s">&quot;GetModuleFileNameW&quot;</span>);</span></code></pre>
				</td>
			</tr>
			<tr class="">
				<td>
					<pre><code><span class="line">[110]</span><span></span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[111]</span><span><span class="w"> →  → </span><span class="k">return</span><span class="w">·</span>Cvt::w2a(std::wstring_view{s.Get(),<span class="w">·</span>length});</span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[112]</span><span><span class="w"> → </span>}</span></code></pre>
				</td>
			</tr>
			<tr class="">
				<td>
					<pre><code><span class="line">[113]</span><span></span></code></pre>
				</td>
			</tr>
			<tr class="">
				<td>
					<pre><code><a id="114"><span class="line">[114]</span></a><span><span class="w"> → </span><span class="k">inline</span><span class="w">·</span>std::<span class="t">string</span><span class="w">·</span>PathOfProcessHandle(HANDLE<span class="w">·</span>process)</span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[115]</span><span><span class="w"> → </span>{</span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[116]</span><span><span class="w"> →  → </span>GLib::Util::WideCharBuffer<span class="w">·</span>s;</span></code></pre>
				</td>
			</tr>
			<tr class="">
				<td>
					<pre><code><span class="line">[117]</span><span></span></code></pre>
				</td>
			</tr>
			<tr class="">
				<td>
					<pre><code><span class="line">[118]</span><span><span class="w"> →  → </span>DWORD<span class="w">·</span>requiredSize;</span></code></pre>
				</td>
			</tr>
			<tr class="">
				<td>
					<pre><code><span class="line">[119]</span><span><span class="w"> →  → </span><span class="k">for</span><span class="w">·</span>(;;)</span></code></pre>
				</td>
			</tr>
			<tr class="">
				<td>
					<pre><code><span class="line">[120]</span><span><span class="w"> →  → </span>{</span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[121]</span><span><span class="w"> →  →  → </span><span class="k">auto</span><span class="w">·</span>size<span class="w">·</span>=<span class="w">·</span><span class="k">static_cast</span>&lt;DWORD&gt;(s.size());</span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[122]</span><span><span class="w"> →  →  → </span>Util::AssertTrue(::QueryFullProcessImageNameW(process,<span class="w">·</span>0,<span class="w">·</span>s.Get(),<span class="w">·</span>&amp;size),<span class="w">·</span><span class="s">&quot;QueryFullProcessImageNameW&quot;</span>);</span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[123]</span><span><span class="w"> →  →  → </span><span class="k">if</span><span class="w">·</span>(size<span class="w">·</span>&lt;<span class="w">·</span>s.size())</span></code></pre>
				</td>
			</tr>
			<tr class="">
				<td>
					<pre><code><span class="line">[124]</span><span><span class="w"> →  →  → </span>{</span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[125]</span><span><span class="w"> →  →  →  → </span>requiredSize<span class="w">·</span>=<span class="w">·</span>size<span class="w">·</span>+<span class="w">·</span>1;</span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[126]</span><span><span class="w"> →  →  →  → </span><span class="k">break</span>;</span></code></pre>
				</td>
			</tr>
			<tr class="">
				<td>
					<pre><code><span class="line">[127]</span><span><span class="w"> →  →  → </span>}</span></code></pre>
				</td>
			</tr>
			<tr class="ncov">
				<td>
					<pre><code><span class="line">[128]</span><span><span class="w"> →  →  → </span><span class="k">if</span><span class="w">·</span>(s.size()<span class="w">·</span>&gt;=<span class="w">·</span>Detail::MaximumPathLength)</span></code></pre>
				</td>
			</tr>
			<tr class="">
				<td>
					<pre><code><span class="line">[129]</span><span><span class="w"> →  →  → </span>{</span></code></pre>
				</td>
			</tr>
			<tr class="ncov">
				<td>
					<pre><code><span class="line">[130]</span><span><span class="w"> →  →  →  → </span><span class="k">throw</span><span class="w">·</span>std::runtime_error(<span class="s">&quot;Path·too·long&quot;</span>);</span></code></pre>
				</td>
			</tr>
			<tr class="">
				<td>
					<pre><code><span class="line">[131]</span><span><span class="w"> →  →  → </span>}</span></code></pre>
				</td>
			</tr>
			<tr class="ncov">
				<td>
					<pre><code><span class="line">[132]</span><span><span class="w"> →  →  → </span>s.EnsureSize(s.size()<span class="w">·</span>*<span class="w">·</span>2);</span></code></pre>
				</td>
			</tr>
			<tr class="ncov">
				<td>
					<pre><code><span class="line">[133]</span><span><span class="w"> →  → </span>}</span></code></pre>
				</td>
			</tr>
			<tr class="">
				<td>
					<pre><code><span class="line">[134]</span><span></span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[135]</span><span><span class="w"> →  → </span>s.EnsureSize(requiredSize);</span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[136]</span><span><span class="w"> →  → </span>Util::AssertTrue(::QueryFullProcessImageNameW(process,<span class="w">·</span>0,<span class="w">·</span>s.Get(),<span class="w">·</span>&amp;requiredSize),<span class="w">·</span><span class="s">&quot;QueryFullProcessImageNameW&quot;</span>);</span></code></pre>
				</td>
			</tr>
			<tr class="">
				<td>
					<pre><code><span class="line">[137]</span><span></span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[138]</span><span><span class="w"> →  → </span><span class="k">return</span><span class="w">·</span>Cvt::w2a(std::wstring_view{s.Get(),<span class="w">·</span>requiredSize});</span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[139]</span><span><span class="w"> → </span>}</span></code></pre>
				</td>
			</tr>
			<tr class="">
				<td>
					<pre><code><span class="line">[140]</span><span></span></code></pre>
				</td>
			</tr>
			<tr class="">
				<td>
					<pre><code><a id="141"><span class="line">[141]</span></a><span><span class="w"> → </span><span class="k">inline</span><span class="w">·</span>Handle<span class="w">·</span>CreateAutoDeleteFile(<span class="k">const</span><span class="w">·</span>std::<span class="t">string</span><span class="w">·</span>&amp;<span class="w">·</span>name)</span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[142]</span><span><span class="w"> → </span>{</span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[143]</span><span><span class="w"> →  → </span>HANDLE<span class="w">·</span>h<span class="w">·</span>=<span class="w">·</span>::CreateFileW(Cvt::a2w(name).c_str(),<span class="w">·</span>GENERIC_READ<span class="w">·</span>|<span class="w">·</span>GENERIC_WRITE,<span class="w">·</span>0,<span class="w">·</span><span class="k">nullptr</span>,<span class="w">·</span>CREATE_ALWAYS,<span class="w">·</span><span class="c">//·NOLINT(hicpp-signed-bitwise)·baad·macro</span></span></code></pre>
				</td>
			</tr>
			<tr class="">
				<td>
					<pre><code><span class="line">[144]</span><span><span class="w"> →  →  → </span>FILE_ATTRIBUTE_TEMPORARY<span class="w">·</span>|<span class="w">·</span>FILE_FLAG_DELETE_ON_CLOSE,<span class="w">·</span><span class="k">nullptr</span>);<span class="w">·</span><span class="c">//·NOLINT(hicpp-signed-bitwise)·baad·macro</span></span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[145]</span><span><span class="w"> →  → </span>Util::AssertTrue(h<span class="w">·</span>!=<span class="w">·</span><span class="k">nullptr</span>,<span class="w">·</span><span class="s">&quot;CreateFileW&quot;</span>);</span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[146]</span><span><span class="w"> →  → </span><span class="k">return</span><span class="w">·</span>Handle(h);</span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[147]</span><span><span class="w"> → </span>}</span></code></pre>
				</td>
			</tr>
			<tr class="">
				<td>
					<pre><code><span class="line">[148]</span><span></span></code></pre>
				</td>
			</tr>
			<tr class="">
				<td>
					<pre><code><a id="149"><span class="line">[149]</span></a><span><span class="w"> → </span><span class="k">inline</span><span class="w">·</span>std::<span class="t">string</span><span class="w">·</span>LongPath(<span class="k">const</span><span class="w">·</span>std::<span class="t">string</span><span class="w">·</span>&amp;<span class="w">·</span>name)</span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[150]</span><span><span class="w"> → </span>{</span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[151]</span><span><span class="w"> →  → </span><span class="k">auto</span><span class="w">·</span>ws<span class="w">·</span>=<span class="w">·</span>GLib::Cvt::a2w(name);</span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[152]</span><span><span class="w"> →  → </span><span class="t">size_t</span><span class="w">·</span>lenNoTerminator<span class="w">·</span>=<span class="w">·</span>::GetLongPathNameW(ws.c_str(),<span class="w">·</span><span class="k">nullptr</span>,<span class="w">·</span>0);</span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[153]</span><span><span class="w"> →  → </span>Util::AssertTrue(lenNoTerminator<span class="w">·</span>!=<span class="w">·</span>0,<span class="w">·</span><span class="s">&quot;GetLongPathNameW&quot;</span>);</span></code></pre>
				</td>
			</tr>
			<tr class="">
				<td>
					<pre><code><span class="line">[154]</span><span></span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[155]</span><span><span class="w"> →  → </span>GLib::Util::WideCharBuffer<span class="w">·</span>s;</span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[156]</span><span><span class="w"> →  → </span>s.EnsureSize(lenNoTerminator<span class="w">·</span>+<span class="w">·</span>1);</span></code></pre>
				</td>
			</tr>
			<tr class="">
				<td>
					<pre><code><span class="line">[157]</span><span></span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[158]</span><span><span class="w"> →  → </span>lenNoTerminator<span class="w">·</span>=<span class="w">·</span>::GetLongPathNameW(ws.c_str(),<span class="w">·</span>s.Get(),<span class="w">·</span><span class="k">static_cast</span>&lt;DWORD&gt;(s.size()));</span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[159]</span><span><span class="w"> →  → </span>Util::AssertTrue(lenNoTerminator<span class="w">·</span>!=<span class="w">·</span>0,<span class="w">·</span><span class="s">&quot;GetLongPathNameW&quot;</span>);</span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[160]</span><span><span class="w"> →  → </span><span class="k">return</span><span class="w">·</span>Cvt::w2a(std::wstring_view{s.Get(),<span class="w">·</span>lenNoTerminator});</span></code></pre>
				</td>
			</tr>
			<tr class="cov">
				<td>
					<pre><code><span class="line">[161]</span><span><span class="w"> → </span>}</span></code></pre>
				</td>
			</tr>
			<tr class="">
				<td>
					<pre><code><span class="line">[162]</span><span>}</span></code></pre>
				</td>
			</tr>
		</table>

		<hr />
		<p class="footer">Generated by <a href="https://github.com/glen-summers/GLib">GLib</a></p>
	</div>

	<div class="edge">
		<div class="" style="height:5.714286%"></div>
		<div class="" style="height:12.000001%"></div>
		<div class="cov" style="height:1.714286%"></div>
		<div class="" style="height:0.571429%"></div>
		<div class="cov" style="height:2.285714%"></div>
		<div class="" style="height:0.571429%"></div>
		<div class="cov" style="height:1.714286%"></div>
		<div class="" style="height:0.571429%"></div>
		<div class="cov" style="height:1.142857%"></div>
		<div class="" style="height:0.571429%"></div>
		<div class="cov" style="height:1.142857%"></div>
		<div class="" style="height:1.714286%"></div>
		<div class="cov" style="height:1.714286%"></div>
		<div class="" style="height:0.571429%"></div>
		<div class="cov" style="height:0.571429%"></div>
		<div class="" style="height:0.571429%"></div>
		<div class="cov" style="height:1.142857%"></div>
		<div class="" style="height:0.571429%"></div>
		<div class="cov" style="height:4.000000%"></div>
		<div class="" style="height:1.142857%"></div>
		<div class="cov" style="height:5.142858%"></div>
		<div class="" style="height:1.142857%"></div>
		<div class="cov" style="height:0.571429%"></div>
		<div class="" style="height:0.571429%"></div>
		<div class="cov" style="height:0.571429%"></div>
		<div class="" style="height:0.571429%"></div>
		<div class="cov" style="height:1.142857%"></div>
		<div class="" style="height:0.571429%"></div>
		<div class="cov" style="height:0.571429%"></div>
		<div class="" style="height:0.571429%"></div>
		<div class="cov" style="height:0.571429%"></div>
		<div class="ncov" style="height:0.571429%"></div>
		<div class="cov" style="height:0.571429%"></div>
		<div class="" style="height:1.142857%"></div>
		<div class="cov" style="height:1.142857%"></div>
		<div class="" style="height:2.857143%"></div>
		<div class="cov" style="height:1.714286%"></div>
		<div class="" style="height:0.571429%"></div>
		<div class="cov" style="height:1.142857%"></div>
		<div class="" style="height:0.571429%"></div>
		<div class="ncov" style="height:0.571429%"></div>
		<div class="" style="height:0.571429%"></div>
		<div class="ncov" style="height:0.571429%"></div>
		<div class="" style="height:0.571429%"></div>
		<div class="ncov" style="height:1.142857%"></div>
		<div class="" style="height:0.571429%"></div>
		<div class="cov" style="height:1.714286%"></div>
		<div class="" style="height:0.571429%"></div>
		<div class="cov" style="height:1.142857%"></div>
		<div class="" style="height:1.142857%"></div>
		<div class="cov" style="height:1.142857%"></div>
		<div class="" style="height:2.285714%"></div>
		<div class="cov" style="height:1.714286%"></div>
		<div class="" style="height:0.571429%"></div>
		<div class="cov" style="height:1.142857%"></div>
		<div class="" style="height:0.571429%"></div>
		<div class="ncov" style="height:0.571429%"></div>
		<div class="" style="height:0.571429%"></div>
		<div class="ncov" style="height:0.571429%"></div>
		<div class="" style="height:0.571429%"></div>
		<div class="ncov" style="height:1.142857%"></div>
		<div class="" style="height:0.571429%"></div>
		<div class="cov" style="height:1.142857%"></div>
		<div class="" style="height:0.571429%"></div>
		<div class="cov" style="height:1.142857%"></div>
		<div class="" style="height:1.142857%"></div>
		<div class="cov" style="height:1.142857%"></div>
		<div class="" style="height:0.571429%"></div>
		<div class="cov" style="height:1.714286%"></div>
		<div class="" style="height:1.142857%"></div>
		<div class="cov" style="height:2.285714%"></div>
		<div class="" style="height:0.571429%"></div>
		<div class="cov" style="height:1.142857%"></div>
		<div class="" style="height:0.571429%"></div>
		<div class="cov" style="height:2.285714%"></div>
		<div class="" style="height:0.571429%"></div>
		<div class="" style="height:1.714286%"></div>
	</div>

</body>
</html>